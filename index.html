<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Local Documentation Screenshot Tool</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>Local Documentation Screenshot Tool</h1>

    <div class="card mode-selection">
      <h2>Select Mode</h2>
      <div class="input-row">
        <label>
          <input
            type="radio"
            name="mode"
            value="advanced"
            id="modeAdvanced"
            checked
          />
          Advanced Mode (Single URL, Context Actions)
        </label>
        <label>
          <input type="radio" name="mode" value="simple" id="modeSimple" />
          Simple Mode (Multiple URLs, Basic Capture)
        </label>
      </div>
    </div>

    <div id="captureForm" style="display: none">
      <div class="card">
        <h2 id="urlInputTitle">Enter URL(s) to Capture</h2>
        <div
          id="urlHelpText"
          class="help-text"
          style="margin-top: -15px; margin-bottom: 10px"
        >
          Note that this is the home page with menu
        </div>
        <textarea
          id="urlList"
          placeholder="Enter URLs (one per line)"
          rows="5"
        ></textarea>
        <div class="input-row screen-size-row">
          <label>
            Screen Size:
            <select id="capturePreset">
              <option value="fullHD" selected>Full HD (1920x1080)</option>
              <option value="mobile">Mobile (375x812)</option>
              <option value="tablet">Tablet (768x1024)</option>
              <option value="fullPage">Full Page (Auto Height)</option>
            </select>
          </label>
        </div>

        <div id="advancedOptions" class="advanced-section">
          <h3>Advanced Options</h3>
          <div class="input-row">
            <label title="Maximum time to wait before capturing the screenshot">
              Max Wait Time (sec):
              <input type="number" id="waitTime" value="5" min="1" max="120" />
            </label>
          </div>
          <div class="toolbar-options">
            <div class="checkbox-container">
              <input type="checkbox" id="includeToolbarButtons" checked />
              <label for="includeToolbarButtons">
                Include Header button interactions (generates additional
                screenshots)
              </label>
            </div>
            <div class="help-text">
              <small>
                When enabled, additional screenshots will be taken after
                clicking each toolbar button on every page
              </small>
            </div>
          </div>

          <div class="input-row">
            <!-- This is the container that will be replaced by the context-actions-header -->
            <label
              title="Actions to perform before capturing (JSON format)"
              style="display: block; width: 100%"
              id="actionsLabel"
            >
              Context Actions (JSON format):
            </label>
            <div id="actionsGenerationStatus" class="generation-status"></div>
            <textarea
              id="actionsField"
              placeholder="Generate or enter menu navigation actions in JSON format"
              rows="8"
              style="width: 100%"
            ></textarea>
            <div id="actionItemMessages" class="action-item-messages"></div>
          </div>
        </div>
      </div>

      <div class="btn-container" id="buttonContainer">
        <button id="captureBtn" class="btn">Capture Screenshots</button>
        <button id="retryFailedBtn" class="btn" disabled>
          Retry Failed URLs
        </button>
      </div>
    </div>

    <div id="progressOutput" style="display: none">
      <div id="progress" class="status-message"></div>
      <div class="progress-container">
        <div id="progressBar" class="progress-bar"></div>
      </div>
      <div class="card stats" id="stats">
        <p><strong>Total URLs:</strong> <span id="totalCount">0</span></p>
        <p><strong>Processed:</strong> <span id="processedCount">0</span></p>
        <p><strong>Failed:</strong> <span id="failedCount">0</span></p>
        <p><strong>Total Time Taken:</strong> <span id="totalTime">0s</span></p>
      </div>
      <div id="output" class="card"></div>
    </div>

    <iframe id="screenshotIframe"></iframe>

    <script type="module" src="js/index.js"></script>
  </body>
</html>
