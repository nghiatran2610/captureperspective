<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ignition Perspective Screenshot Capture</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>Ignition Perspective Screenshot Capture</h1>
    <div id="tabVisibilityWarning" class="warning-message">
      ‚ö†Ô∏è This tool works best in a separate browser window or an active browser
      tab.
    </div>
    <div id="baseUrlSection" class="card">
      <div class="base-url-container">
        <label for="baseUrlInput" class="base-url-label">Project URL</label>
        <input
          type="text"
          placeholder="http://localhost:8088/data/perspective/client/PROJECT_NAME"
          class="base-url-input"
          id="baseUrlInput"
        />
      </div>
    </div>

    <div
      id="loginOptionSection"
      class="card login-option-section"
      style="display: none"
    >
      <div class="input-row">
        <label>
          <input
            type="radio"
            name="loginOption"
            value="continueWithoutLogin"
            id="optionContinueWithoutLogin"
          />
          Continue as Guest
        </label>
        <label>
          <input
            type="radio"
            name="loginOption"
            value="login"
            id="optionLogin"
          />
          Continue with Authentication
        </label>
      </div>
    </div>

    <div id="loginSection" class="card" style="display: none"></div>

    <div id="captureForm" style="display: none">
      <div class="card" id="url-input-container">
        <div
          class="card-header-toggle-wrapper"
          id="captureSettingsToggle"
          title="Toggle Settings Visibility"
        >
          <h2 id="urlInputTitle">Pages</h2>
          <span class="collapse-indicator">‚ñº</span>
        </div>
        <div id="captureSettingsContent" class="collapsed">
          <div
            id="urlHelpText"
            class="help-text"
            style="margin-top: 5px; margin-bottom: 10px; display: none"
          >
            Note that this is the home page with menu
          </div>
          <textarea
            id="urlList"
            placeholder="Enter URLs (one per line)"
            rows="5"
            style="display: none"
          ></textarea>

          <div
            class="input-row screen-size-row setting-container important-setting-group"
            style="display: flex; align-items: center; gap: 15px"
          >
            <label style="margin-bottom: 0">
              Screen Size:
              <select id="capturePreset">
                <option value="fullHD" selected>üñ•Ô∏è Full HD (1920x1080)</option>
                <option value="mobile">üì± Mobile (375x812)</option>
                <option value="tablet">‚ñ≠ Tablet (768x1024)</option>
              </select>
            </label>
            <label
              style="margin-bottom: 0; font-weight: normal"
              title="Attempt to capture the entire vertical height of the page at the selected width."
            >
              <input
                type="checkbox"
                id="fullPageCheckbox"
                style="margin-right: 5px"
                checked
              />Full Page Height
            </label>
          </div>
        </div>
      </div>

      <div
        id="advancedOptions"
        class="advanced-section"
        style="display: none"
      ></div>

      <div class="btn-container" id="buttonContainer">
        <button
          id="captureBtn"
          class="btn icon-btn"
          disabled
          title="Capture Screenshots"
        >
          üì∏ Capture
        </button>
      </div>
    </div>

    <div id="progressOutput" style="display: none">
      <div class="progress-container">
        <div id="progressBar" class="progress-bar"></div>
      </div>
      <div id="progress" class="status-message"></div>

      <div class="card stats" id="stats" style="display: none !important">
        <p><strong>Total URLs:</strong> <span id="totalCount">0</span></p>
        <p><strong>Processed:</strong> <span id="processedCount">0</span></p>
        <p><strong>Failed:</strong> <span id="failedCount">0</span></p>
        <p><strong>Total Time Taken:</strong> <span id="totalTime">0s</span></p>
      </div>
      <div id="output" class="card"></div>
    </div>

    <iframe id="screenshotIframe"></iframe>
    <script type="module" src="js/index.js"></script>
  </body>
</html>
